{"mappings":"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","sources":["packages/@react-spectrum/overlays/src/index.ts","packages/@react-spectrum/overlays/src/Overlay.tsx","packages/@react-spectrum/overlays/src/OpenTransition.tsx","packages/@react-spectrum/overlays/src/Popover.tsx","packages/@react-spectrum/overlays/src/overlays.css","packages/@adobe/spectrum-css-temp/components/popover/vars.css","packages/@react-spectrum/overlays/src/Underlay.tsx","packages/@adobe/spectrum-css-temp/components/underlay/vars.css","packages/@react-spectrum/overlays/src/Modal.tsx","packages/@adobe/spectrum-css-temp/components/modal/vars.css","packages/@react-spectrum/overlays/src/Tray.tsx","packages/@adobe/spectrum-css-temp/components/tray/vars.css"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n/// <reference types=\"css-module-types\" />\n\nexport {Overlay} from './Overlay';\nexport {Popover} from './Popover';\nexport {Modal} from './Modal';\nexport {Tray} from './Tray';\nexport {OpenTransition} from './OpenTransition';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMRef} from '@react-types/shared';\nimport {OpenTransition} from './OpenTransition';\nimport {OverlayProps} from '@react-types/overlays';\nimport {Provider} from '@react-spectrum/provider';\nimport React, {useCallback, useState} from 'react';\nimport {Overlay as ReactAriaOverlay} from '@react-aria/overlays';\n\nfunction Overlay(props: OverlayProps, ref: DOMRef<HTMLDivElement>) {\n  let {children, isOpen, container, onEnter, onEntering, onEntered, onExit, onExiting, onExited} = props;\n  let [exited, setExited] = useState(!isOpen);\n\n  let handleEntered = useCallback(() => {\n    setExited(false);\n    if (onEntered) {\n      onEntered();\n    }\n  }, [onEntered]);\n\n  let handleExited = useCallback(() => {\n    setExited(true);\n    if (onExited) {\n      onExited();\n    }\n  }, [onExited]);\n\n  // Don't un-render the overlay while it's transitioning out.\n  let mountOverlay = isOpen || !exited;\n  if (!mountOverlay) {\n    // Don't bother showing anything if we don't have to.\n    return null;\n  }\n\n  return (\n    <ReactAriaOverlay portalContainer={container}>\n      <Provider ref={ref} UNSAFE_style={{background: 'transparent', isolation: 'isolate'}} isDisabled={false}>\n        <OpenTransition\n          in={isOpen}\n          appear\n          onExit={onExit}\n          onExiting={onExiting}\n          onExited={handleExited}\n          onEnter={onEnter}\n          onEntering={onEntering}\n          onEntered={handleEntered}>\n          {children}\n        </OpenTransition>\n      </Provider>\n    </ReactAriaOverlay>\n  );\n}\n\nlet _Overlay = React.forwardRef(Overlay);\nexport {_Overlay as Overlay};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport {Transition} from 'react-transition-group';\n\nconst OPEN_STATES = {\n  entering: false,\n  entered: true\n};\n\n/**\n * Timeout issues adding css animations to enter may be related to\n * https://github.com/reactjs/react-transition-group/issues/189 or\n * https://github.com/reactjs/react-transition-group/issues/22\n * my VM isn't good enough to debug accurately and get a better answer.\n *\n * As a result, use enter 0 so that is-open is applied once entered\n * it doesn't matter if we know when the css-animation is done on entering\n * for exiting though, give time for the css-animation to play\n * before removing from the DOM\n * **note** hitting esc bypasses exit animation for anyone testing.\n */\n\nexport function OpenTransition(props) {\n  // Do not apply any transition if in chromatic.\n  if (process.env.CHROMATIC) {\n    return React.Children.map(props.children, child => child && React.cloneElement(child, {isOpen: props.in}));\n  }\n\n  return (\n    <Transition timeout={{enter: 0, exit: 350}} {...props}>\n      {(state) => React.Children.map(props.children, child => child && React.cloneElement(child, {isOpen: !!OPEN_STATES[state]}))}\n    </Transition>\n  );\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaPopoverProps, DismissButton, usePopover} from '@react-aria/overlays';\nimport {classNames, useDOMRef, useStyleProps} from '@react-spectrum/utils';\nimport {DOMRef, StyleProps} from '@react-types/shared';\nimport {Overlay} from './Overlay';\nimport {OverlayTriggerState} from '@react-stately/overlays';\nimport overrideStyles from './overlays.css';\nimport React, {forwardRef, ReactNode, RefObject, useRef, useState} from 'react';\nimport styles from '@adobe/spectrum-css-temp/components/popover/vars.css';\nimport {Underlay} from './Underlay';\nimport {useLayoutEffect} from '@react-aria/utils';\n\ninterface PopoverProps extends Omit<AriaPopoverProps, 'popoverRef' | 'maxHeight'>, StyleProps {\n  children: ReactNode,\n  hideArrow?: boolean,\n  state: OverlayTriggerState\n}\n\ninterface PopoverWrapperProps extends PopoverProps {\n  isOpen?: boolean\n}\n\n/**\n * Arrow placement can be done pointing right or down because those paths start at 0, x or y. Because the\n * other two don't, they start at a fractional pixel value, it introduces rounding differences between browsers and\n * between display types (retina with subpixels vs not retina). By flipping them with CSS we can ensure that\n * the path always starts at 0 so that it perfectly overlaps the popover's border.\n * See bottom of file for more explanation.\n */\nlet arrowPlacement = {\n  left: 'right',\n  right: 'right',\n  top: 'bottom',\n  bottom: 'bottom'\n};\n\nfunction Popover(props: PopoverProps, ref: DOMRef<HTMLDivElement>) {\n  let {\n    children,\n    state,\n    ...otherProps\n  } = props;\n  let domRef = useDOMRef(ref);\n\n  return (\n    <Overlay {...otherProps} isOpen={state.isOpen}>\n      <PopoverWrapper ref={domRef} {...props}>\n        {children}\n      </PopoverWrapper>\n    </Overlay>\n  );\n}\n\nconst PopoverWrapper = forwardRef((props: PopoverWrapperProps, ref: RefObject<HTMLDivElement>) => {\n  let {\n    children,\n    isOpen,\n    hideArrow,\n    isNonModal,\n    state\n  } = props;\n  let {styleProps} = useStyleProps(props);\n\n  let {popoverProps, arrowProps, underlayProps, placement} = usePopover({\n    ...props,\n    popoverRef: ref,\n    maxHeight: null\n  }, state);\n\n  return (\n    <>\n      {!isNonModal && <Underlay isTransparent {...underlayProps} isOpen={isOpen} /> }\n      <div\n        {...styleProps}\n        {...popoverProps}\n        style={{\n          ...styleProps.style,\n          ...popoverProps.style\n        }}\n        ref={ref}\n        className={\n          classNames(\n            styles,\n            'spectrum-Popover',\n            `spectrum-Popover--${placement}`,\n            {\n              'spectrum-Popover--withTip': !hideArrow,\n              'is-open': isOpen\n            },\n            classNames(\n              overrideStyles,\n              'spectrum-Popover',\n              'react-spectrum-Popover'\n            ),\n            styleProps.className\n          )\n        }\n        role=\"presentation\"\n        data-testid=\"popover\">\n        {!isNonModal && <DismissButton onDismiss={state.close} />}\n        {children}\n        {hideArrow ? null : (\n          <Arrow arrowProps={arrowProps} direction={arrowPlacement[placement]} />\n        )}\n        <DismissButton onDismiss={state.close} />\n      </div>\n    </>\n  );\n});\n\nlet ROOT_2 = Math.sqrt(2);\n\nfunction Arrow(props) {\n  let [size, setSize] = useState(20);\n  let [borderWidth, setBorderWidth] = useState(1);\n  let ref = useRef();\n  // get the css value for the tip size and divide it by 2 for this arrow implementation\n  useLayoutEffect(() => {\n    if (ref.current) {\n      let spectrumTipWidth = window.getComputedStyle(ref.current)\n        .getPropertyValue('--spectrum-popover-tip-size');\n      if (spectrumTipWidth !== '') {\n        setSize(parseInt(spectrumTipWidth, 10) / 2);\n      }\n\n      let spectrumBorderWidth = window.getComputedStyle(ref.current)\n        .getPropertyValue('--spectrum-popover-tip-borderWidth');\n      if (spectrumBorderWidth !== '') {\n        setBorderWidth(parseInt(spectrumBorderWidth, 10));\n      }\n    }\n  }, [ref]);\n\n  let landscape = props.direction === 'top' || props.direction === 'bottom';\n  let mirror = props.direction === 'left' || props.direction === 'top';\n\n  let borderDiagonal = borderWidth * ROOT_2;\n  let halfBorderDiagonal = borderDiagonal / 2;\n\n  let secondary = 2 * size + 2 * borderDiagonal;\n  let primary = size + borderDiagonal;\n\n  let primaryStart = mirror ? primary : 0;\n  let primaryEnd = mirror ? halfBorderDiagonal : primary - halfBorderDiagonal;\n\n  let secondaryStart = halfBorderDiagonal;\n  let secondaryMiddle = secondary / 2;\n  let secondaryEnd = secondary - halfBorderDiagonal;\n\n  let pathData = landscape ? [\n    'M', secondaryStart, primaryStart,\n    'L', secondaryMiddle, primaryEnd,\n    'L', secondaryEnd, primaryStart\n  ] : [\n    'M', primaryStart, secondaryStart,\n    'L', primaryEnd, secondaryMiddle,\n    'L', primaryStart, secondaryEnd\n  ];\n  let arrowProps = props.arrowProps;\n\n  /* use ceil because the svg needs to always accomodate the path inside it */\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/svg/2000\"\n      width={Math.ceil(landscape ? secondary : primary)}\n      height={Math.ceil(landscape ? primary : secondary)}\n      style={props.style}\n      className={classNames(styles, 'spectrum-Popover-tip')}\n      ref={ref}\n      {...arrowProps}>\n      <path className={classNames(styles, 'spectrum-Popover-tip-triangle')} d={pathData.join(' ')} />\n    </svg>\n  );\n}\n\nlet _Popover = forwardRef(Popover);\nexport {_Popover as Popover};\n\n/**\n * More explanation on popover tips.\n * - I tried changing the calculation of the popover placement in an effort to get it squarely onto the pixel grid.\n * This did not work because the problem was in the svg partial pixel end of the path in the popover right and popover bottom.\n * - I tried creating an extra 'bandaid' path that matched the background color and would overlap the popover border.\n * This didn't work because the border on the svg triangle didn't extend all the way to match nicely with the popover border.\n * - I tried getting the client bounding box and setting the svg to that partial pixel value\n * This didn't work because again the issue was inside the svg\n * - I didn't try drawing the svg backwards\n * This could still be tried\n * - I tried changing the calculation of the popover placement AND the svg height/width so that they were all rounded\n * This seems to have done the trick.\n */\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n.spectrum-Popover {\n  /* This makes the contents of popovers focusable immediately, without waiting\n     a frame for animations to start. */\n  &.react-spectrum-Popover {\n    visibility: visible;\n  }\n\n  .spectrum-Dialog-content {\n    max-height: initial;\n  }\n}\n\n.spectrum-Modal-wrapper.react-spectrum-Modal-wrapper,\n.spectrum-Modal.react-spectrum-Modal {\n  visibility: visible;\n}\n\n.spectrum-Tray.react-spectrum-Tray {\n  visibility: visible;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n@import './index.css';\n@import './skin.css';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {classNames} from '@react-spectrum/utils';\nimport React from 'react';\nimport underlayStyles from '@adobe/spectrum-css-temp/components/underlay/vars.css';\n\ninterface UnderlayProps {\n  isOpen?: boolean,\n  isTransparent?: boolean\n}\n\nexport function Underlay({isOpen, isTransparent}: UnderlayProps) {\n  return (\n    <div className={classNames(underlayStyles, 'spectrum-Underlay', {'is-open': isOpen, 'spectrum-Underlay--transparent': isTransparent})} />\n  );\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n@import './index.css';\n@import './skin.css';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaModalOverlayProps, useModalOverlay} from '@react-aria/overlays';\nimport {classNames, useDOMRef, useStyleProps} from '@react-spectrum/utils';\nimport {DOMRef, StyleProps} from '@react-types/shared';\nimport modalStyles from '@adobe/spectrum-css-temp/components/modal/vars.css';\nimport {Overlay} from './Overlay';\nimport {OverlayProps} from '@react-types/overlays';\nimport {OverlayTriggerState} from '@react-stately/overlays';\nimport overrideStyles from './overlays.css';\nimport React, {forwardRef, ReactNode, RefObject} from 'react';\nimport {Underlay} from './Underlay';\nimport {useViewportSize} from '@react-aria/utils';\n\ninterface ModalProps extends AriaModalOverlayProps, StyleProps, OverlayProps {\n  children: ReactNode,\n  state: OverlayTriggerState,\n  type?: 'modal' | 'fullscreen' | 'fullscreenTakeover'\n}\n\ninterface ModalWrapperProps extends ModalProps {\n  isOpen?: boolean\n}\n\nfunction Modal(props: ModalProps, ref: DOMRef<HTMLDivElement>) {\n  let {children, state, ...otherProps} = props;\n  let domRef = useDOMRef(ref);\n\n  return (\n    <Overlay {...otherProps} isOpen={state.isOpen}>\n      <ModalWrapper {...props} ref={domRef}>\n        {children}\n      </ModalWrapper>\n    </Overlay>\n  );\n}\n\nlet typeMap = {\n  fullscreen: 'fullscreen',\n  fullscreenTakeover: 'fullscreenTakeover'\n};\n\nlet ModalWrapper = forwardRef(function (props: ModalWrapperProps, ref: RefObject<HTMLDivElement>) {\n  let {type, children, state, isOpen} = props;\n  let typeVariant = typeMap[type];\n  let {styleProps} = useStyleProps(props);\n\n  let {modalProps, underlayProps} = useModalOverlay(props, state, ref);\n\n  let wrapperClassName = classNames(\n    modalStyles,\n    'spectrum-Modal-wrapper',\n    classNames(\n      overrideStyles,\n      'spectrum-Modal-wrapper',\n      'react-spectrum-Modal-wrapper'\n    )\n  );\n\n  let modalClassName = classNames(\n    modalStyles,\n    'spectrum-Modal',\n    {\n      'is-open': isOpen\n    },\n    classNames(\n      overrideStyles,\n      'spectrum-Modal',\n      'react-spectrum-Modal'\n    ),\n    {[`spectrum-Modal--${typeVariant}`]: typeVariant},\n    styleProps.className\n  );\n\n  let viewport = useViewportSize();\n  let style: any = {\n    '--spectrum-visual-viewport-height': viewport.height + 'px'\n  };\n\n  return (\n    <>\n      <Underlay {...underlayProps} isOpen={isOpen} />\n      <div className={wrapperClassName} style={style}>\n        <div\n          {...styleProps}\n          {...modalProps}\n          ref={ref}\n          className={modalClassName}\n          data-testid=\"modal\">\n          {children}\n        </div>\n      </div>\n    </>\n  );\n});\n\nlet _Modal = forwardRef(Modal);\nexport {_Modal as Modal};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n@import './index.css';\n@import './skin.css';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaModalOverlayProps, DismissButton, useModalOverlay} from '@react-aria/overlays';\nimport {classNames, useDOMRef, useStyleProps} from '@react-spectrum/utils';\nimport {DOMRef, StyleProps} from '@react-types/shared';\nimport {Overlay} from './Overlay';\nimport {OverlayProps} from '@react-types/overlays';\nimport {OverlayTriggerState} from '@react-stately/overlays';\nimport overrideStyles from './overlays.css';\nimport React, {forwardRef, ReactNode, RefObject} from 'react';\nimport trayStyles from '@adobe/spectrum-css-temp/components/tray/vars.css';\nimport {Underlay} from './Underlay';\nimport {useViewportSize} from '@react-aria/utils';\n\ninterface TrayProps extends AriaModalOverlayProps, StyleProps, OverlayProps {\n  children: ReactNode,\n  state: OverlayTriggerState,\n  isFixedHeight?: boolean\n}\n\ninterface TrayWrapperProps extends TrayProps {\n  isOpen?: boolean\n}\n\nfunction Tray(props: TrayProps, ref: DOMRef<HTMLDivElement>) {\n  let {children, state, ...otherProps} = props;\n  let domRef = useDOMRef(ref);\n\n  return (\n    <Overlay {...otherProps} isOpen={state.isOpen}>\n      <TrayWrapper {...props} ref={domRef}>\n        {children}\n      </TrayWrapper>\n    </Overlay>\n  );\n}\n\nlet TrayWrapper = forwardRef(function (props: TrayWrapperProps, ref: RefObject<HTMLDivElement>) {\n  let {\n    children,\n    isOpen,\n    isFixedHeight,\n    state\n  } = props;\n  let {styleProps} = useStyleProps(props);\n\n  let {modalProps, underlayProps} = useModalOverlay({\n    ...props,\n    isDismissable: true\n  }, state, ref);\n\n  // We need to measure the window's height in JS rather than using percentages in CSS\n  // so that contents (e.g. menu) can inherit the max-height properly. Using percentages\n  // does not work properly because there is nothing to base the percentage on.\n  // We cannot use vh units because mobile browsers adjust the window height dynamically\n  // when the address bar/bottom toolbars show and hide on scroll and vh units are fixed.\n  // Also, the visual viewport is smaller than the layout viewport when the virtual keyboard\n  // is up, so use the VisualViewport API to ensure the tray is displayed above the keyboard.\n  let viewport = useViewportSize();\n  let wrapperStyle: any = {\n    '--spectrum-visual-viewport-height': viewport.height + 'px'\n  };\n\n  let wrapperClassName = classNames(\n    trayStyles,\n    'spectrum-Tray-wrapper'\n  );\n\n  let className = classNames(\n    trayStyles,\n    'spectrum-Tray',\n    {\n      'is-open': isOpen,\n      'spectrum-Tray--fixedHeight': isFixedHeight\n    },\n    classNames(\n      overrideStyles,\n      'spectrum-Tray',\n      'react-spectrum-Tray'\n    ),\n    styleProps.className\n  );\n\n  return (\n    <>\n      <Underlay {...underlayProps} isOpen={isOpen} />\n      <div className={wrapperClassName} style={wrapperStyle}>\n        <div\n          {...styleProps}\n          {...modalProps}\n          className={className}\n          ref={ref}\n          data-testid=\"tray\">\n          <DismissButton onDismiss={state.close} />\n          {children}\n          <DismissButton onDismiss={state.close} />\n        </div>\n      </div>\n    </>\n  );\n});\n\nlet _Tray = forwardRef(Tray);\nexport {_Tray as Tray};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n@import './index.css';\n@import './skin.css';\n"],"names":[],"version":3,"file":"module.js.map"}